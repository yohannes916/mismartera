# ==============================================================================
# MISMARTERA TRADING BACKEND - CONFIGURATION
# ==============================================================================
# 
# NESTED STRUCTURE: Use double underscore (__) to access nested config
# Example: LOGGER__DEFAULT_LEVEL=DEBUG, SYSTEM__OPERATING_MODE=live
#
# See: docs/CONFIGURATION.md for complete documentation
# ==============================================================================

# ------------------------------------------------------------------------------
# APPLICATION
# ------------------------------------------------------------------------------

APP_NAME=Mismartera Trading Backend
APP_VERSION=1.0.0
DEBUG=True


# ==============================================================================
# NESTED CONFIGURATION
# ==============================================================================

# ------------------------------------------------------------------------------
# LOGGER CONFIGURATION
# ------------------------------------------------------------------------------

# Core Logging Settings
LOGGER__DEFAULT_LEVEL=INFO                           # Log level: TRACE, DEBUG, INFO, SUCCESS, WARNING, ERROR, CRITICAL
LOGGER__FILE_PATH=./data/logs/app.log                # Path to log file
LOGGER__ROTATION=10 MB                               # Rotate when file reaches this size
LOGGER__RETENTION=30 days                            # Keep logs for this duration

# Frequent Deduplication Filter Settings
LOGGER__FILTER_ENABLED=true                          # Enable frequent log deduplication filter
LOGGER__FILTER_MAX_HISTORY=5                         # Number of recent log locations to track
LOGGER__FILTER_TIME_THRESHOLD_SECONDS=1.0            # Suppress duplicates within this time window (seconds)


# ------------------------------------------------------------------------------
# SYSTEM CONFIGURATION
# ------------------------------------------------------------------------------

SYSTEM__OPERATING_MODE=backtest                      # "backtest" or "live"
SYSTEM__DISABLE_CLI_LOGIN=true                       # Disable CLI login requirement


# ------------------------------------------------------------------------------
# API SERVER CONFIGURATION
# ------------------------------------------------------------------------------

API__HOST=127.0.0.1                                  # API server host
API__PORT=8000                                       # API server port


# ------------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ------------------------------------------------------------------------------

SECURITY__SECRET_KEY=your-secret-key-here-change-me  # JWT secret key (REQUIRED)
SECURITY__ALGORITHM=HS256                            # JWT algorithm
SECURITY__ACCESS_TOKEN_EXPIRE_MINUTES=1440           # Token expiration (24 hours)


# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

DATABASE__URL=sqlite+aiosqlite:///./data/trading_app.db  # Database connection string


# ------------------------------------------------------------------------------
# SCHWAB API CONFIGURATION
# ------------------------------------------------------------------------------

SCHWAB__APP_KEY=                                     # Schwab app key
SCHWAB__APP_SECRET=                                  # Schwab app secret
SCHWAB__CALLBACK_URL=https://127.0.0.1:8000/callback  # OAuth callback URL
SCHWAB__API_BASE_URL=https://api.schwabapi.com       # Schwab API base URL


# ------------------------------------------------------------------------------
# ALPACA API CONFIGURATION
# ------------------------------------------------------------------------------

ALPACA__API_KEY_ID=                                  # Alpaca API key ID
ALPACA__API_SECRET_KEY=                              # Alpaca API secret key
ALPACA__API_BASE_URL=https://api.alpaca.markets      # Trading API base URL
ALPACA__DATA_BASE_URL=https://data.alpaca.markets    # Historical data API base URL
ALPACA__PAPER_TRADING=true                           # Use paper trading account


# ------------------------------------------------------------------------------
# CLAUDE API CONFIGURATION
# ------------------------------------------------------------------------------

CLAUDE__API_KEY=                                     # Anthropic API key
CLAUDE__MODEL=claude-opus-4-20250514                 # Claude model to use

# ------------------------------------------------------------------------------
# DATA MANAGER CONFIGURATION
# ------------------------------------------------------------------------------

DATA_MANAGER__DATA_API=alpaca                        # Data provider: "alpaca" or "schwab"


# ------------------------------------------------------------------------------
# EXECUTION CONFIGURATION
# ------------------------------------------------------------------------------

EXECUTION__DEFAULT_BROKERAGE=mismartera              # Default brokerage: "alpaca", "schwab", or "mismartera"


# ------------------------------------------------------------------------------
# MISMARTERA SIMULATED TRADING CONFIGURATION
# ------------------------------------------------------------------------------

MISMARTERA__INITIAL_BALANCE=100000.0                 # Starting cash balance
MISMARTERA__BUYING_POWER_MULTIPLIER=1.0              # Margin multiplier (1.0=cash, 2.0=2x leverage)
MISMARTERA__EXECUTION_COST_PCT=0.001                 # Total execution cost as % (0.1% = 10 bps)
MISMARTERA__SLIPPAGE_PCT=0.0001                      # Market order slippage (0.01% = 1 bp)


