# Visual Structure Comparison: Python Object â†” JSON Export

## SymbolSessionData (Python) â†’ JSON Export Mapping

```
SymbolSessionData (Python Object)                 JSON Export Structure
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              {
â”‚ SymbolSessionData               â”‚                "AAPL": {
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                 â”‚                  â”‚ "session": {        â”‚
â”‚ session_volume: 19106           â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   "volume": 19106   â”‚
â”‚ session_high: 13.54             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   "high": 13.54     â”‚
â”‚ session_low: 13.47              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   "low": 13.47      â”‚
â”‚ last_update: datetime           â”‚    (not exported)â”‚                     â”‚
â”‚                                 â”‚                  â”‚   "data": {         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ # Base Bars (Current Session)   â”‚                  â”‚     â”‚ "1m": {     â”‚ â”‚
â”‚ bars_base: Deque[BarData]       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚     â”‚   count: 112â”‚ â”‚
â”‚   [bar1, bar2, bar3, ...]       â”‚                  â”‚     â”‚   generated:â”‚ â”‚
â”‚                                 â”‚                  â”‚     â”‚     false   â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚                  â”‚     â”‚   quality:  â”‚ â”‚
â”‚ # Quality Metrics               â”‚                  â”‚     â”‚     98.5 â—„â”€â”€â”¼â”€â”¼â”€â”
â”‚ bar_quality: {                  â”‚                  â”‚     â”‚   data: []  â”‚ â”‚ â”‚
â”‚   "1m": 98.5,  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚   "5m": 98.5,  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚   "1d": 100.0  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚                  â”‚     â”‚ "5m": {     â”‚ â”‚ â”‚
â”‚ }                       â”‚   â”‚   â”‚                  â”‚     â”‚   count: 23 â”‚ â”‚ â”‚
â”‚                         â”‚   â”‚   â”‚                  â”‚     â”‚   generated:â”‚ â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚   â”‚                  â”‚     â”‚     true    â”‚ â”‚ â”‚
â”‚ # Derived Bars          â”‚   â”‚   â”‚                  â”‚     â”‚   quality:  â”‚ â”‚ â”‚
â”‚ bars_derived: {         â”‚   â””â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤     98.5 â—„â”€â”€â”¼â”€â”˜ â”‚
â”‚   "5m": [bar1, bar2],   â”‚       â”‚                  â”‚     â”‚   data: []  â”‚   â”‚
â”‚   "15m": [bar1]         â”‚       â”‚                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚ }                       â”‚       â”‚                  â”‚   }                   â”‚
â”‚                         â”‚       â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚       â”‚
â”‚ # Historical Data       â”‚       â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ historical_bars: {      â”‚       â”‚                  â”‚ "historical": {     â”‚
â”‚   "1m": {               â”‚       â”‚                  â”‚   "loaded": true    â”‚
â”‚     date1: [bars],      â”‚       â”‚                  â”‚   "data": {         â”‚
â”‚     date2: [bars],      â”‚       â”‚                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚     date3: [bars]       â”‚â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚     â”‚ "1m": {     â”‚ â”‚
â”‚   },                    â”‚       â”‚                  â”‚     â”‚   count:1656â”‚ â”‚
â”‚   "1d": {               â”‚       â”‚                  â”‚     â”‚   date_rangeâ”‚ â”‚
â”‚     date1: [bars],      â”‚       â”‚                  â”‚     â”‚   dates: [] â”‚ â”‚
â”‚     date2: [bars]       â”‚â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚     â”‚   quality:  â”‚ â”‚
â”‚   }                     â”‚       â”‚                  â”‚     â”‚     93.4 â—„â”€â”€â”¼â”€â”˜
â”‚ }                       â”‚       â”‚                  â”‚     â”‚   data: []  â”‚
â”‚                         â”‚       â”‚                  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ historical_indicators: {â”‚       â”‚                  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   "avg_volume_2d": 123, â”‚       â”‚                  â”‚     â”‚ "1d": {     â”‚
â”‚   "max_price_5d": 150   â”‚       â”‚                  â”‚     â”‚   count: 2  â”‚
â”‚ }                       â”‚       â”‚                  â”‚     â”‚   quality:  â”‚
â”‚                         â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤     100.0   â”‚
â”‚                         â”‚                          â”‚     â”‚   data: []  â”‚
â”‚                         â”‚                          â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                         â”‚                          â”‚   },
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚   "avg_volume_2d": 123,
â”‚                                                    â”‚   "max_price_5d": 150
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ }
                                                    }
                                                  }

KEY OBSERVATIONS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. QUALITY NESTING:
   âœ… Python: Flat dict `bar_quality["1m"]`
   âœ… JSON: Nested under each interval `session.data["1m"].quality`

2. HISTORICAL DATE FLATTENING:
   Python: Per-date storage `historical_bars["1m"][date1]`
   JSON: All dates merged into single array

3. SESSION GROUPING:
   Python: Flat attributes at object level
   JSON: Grouped under "session" key

4. INDICATORS FLATTENING:
   Python: Nested dict `historical_indicators["avg_volume_2d"]`
   JSON: Flattened to historical level `historical.avg_volume_2d`
```

---

## Gap Information Flow (Current State)

```
DataQualityManager Thread
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ _calculate_quality(symbol, interval)              â”‚
â”‚                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 1. Get bars from SessionData                 â”‚ â”‚
â”‚  â”‚    bars = session_data.get_bars("AAPL", "1m")â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 2. Detect gaps                               â”‚ â”‚
â”‚  â”‚    gaps = detect_gaps(                       â”‚ â”‚
â”‚  â”‚        symbol="AAPL",                        â”‚ â”‚
â”‚  â”‚        session_start=09:30:00,               â”‚ â”‚
â”‚  â”‚        current_time=11:45:00,                â”‚ â”‚
â”‚  â”‚        bars=bars,                            â”‚ â”‚
â”‚  â”‚        interval_minutes=1                    â”‚ â”‚
â”‚  â”‚    )                                         â”‚ â”‚
â”‚  â”‚                                              â”‚ â”‚
â”‚  â”‚    Returns: [                                â”‚ â”‚
â”‚  â”‚        GapInfo(start=09:45, end=09:47, count=3),â”‚
â”‚  â”‚        GapInfo(start=10:15, end=10:17, count=3) â”‚
â”‚  â”‚    ]                                         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 3. Calculate quality                         â”‚ â”‚
â”‚  â”‚    expected_bars = 135                       â”‚ â”‚
â”‚  â”‚    actual_bars = 129                         â”‚ â”‚
â”‚  â”‚    quality = (129 / 135) Ã— 100 = 95.6%       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 4. Store ONLY quality percentage             â”‚ â”‚
â”‚  â”‚    session_data.set_quality("AAPL", "1m", 95.6)â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 5. Log gaps (for debugging)                  â”‚ â”‚
â”‚  â”‚    logger.info(f"Found {len(gaps)} gaps")    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â†“                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ 6. DISCARD gap objects âŒ                    â”‚ â”‚
â”‚  â”‚    gaps goes out of scope                    â”‚ â”‚
â”‚  â”‚    Gap details LOST                          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionData Storage                                â”‚
â”‚                                                    â”‚
â”‚  symbol_data.bar_quality = {                      â”‚
â”‚    "1m": 95.6  âœ… STORED                          â”‚
â”‚  }                                                â”‚
â”‚                                                    â”‚
â”‚  symbol_data.bar_gaps = {}  âŒ EMPTY              â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ JSON Export                                        â”‚
â”‚                                                    â”‚
â”‚  {                                                â”‚
â”‚    "1m": {                                        â”‚
â”‚      "quality": 95.6,  âœ… EXPORTED                â”‚
â”‚      "gaps": ???       âŒ NOT AVAILABLE           â”‚
â”‚    }                                              â”‚
â”‚  }                                                â”‚
â”‚                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Proposed Enhancement: Store Gap Details

```
ENHANCED Flow
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

DataQualityManager Thread
  â”‚
  â”œâ”€â†’ gaps = detect_gaps(...)
  â”‚
  â”œâ”€â†’ quality = calculate_quality(...)
  â”‚
  â”œâ”€â†’ session_data.set_quality("AAPL", "1m", 95.6)  âœ… Existing
  â”‚
  â””â”€â†’ session_data.set_gaps("AAPL", "1m", gaps)      âœ… NEW!
      â”‚
      â†“
SessionData Storage
  â”‚
  â”œâ”€â†’ symbol_data.bar_quality["1m"] = 95.6          âœ… Existing
  â”‚
  â””â”€â†’ symbol_data.bar_gaps["1m"] = [                âœ… NEW!
        GapInfo(start=09:45, end=09:47, count=3),
        GapInfo(start=10:15, end=10:17, count=3)
      ]
      â”‚
      â†“
JSON Export (session.data["1m"])
  â”‚
  {
    "count": 129,
    "quality": 95.6,                                 âœ… Existing
    "gaps": {                                        âœ… NEW!
      "gap_count": 2,
      "missing_bars": 6,
      "ranges": [
        {
          "start_time": "09:45:00",
          "end_time": "09:47:00",
          "bar_count": 3
        },
        {
          "start_time": "10:15:00",
          "end_time": "10:17:00",
          "bar_count": 3
        }
      ]
    },
    "data": [[...], [...]]
  }
```

---

## Why Gap Details Should Be Per-Interval

```
Different intervals have DIFFERENT gaps!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Example: Missing 1m bars at 09:45-09:47, 10:15-10:17

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1m Bars (Base Interval)                     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Expected: 390 bars (09:30 - 16:00)          â”‚
â”‚ Actual: 384 bars                            â”‚
â”‚ Missing: 6 bars (2 gaps)                    â”‚
â”‚ Quality: 98.5%                              â”‚
â”‚                                             â”‚
â”‚ Gaps:                                       â”‚
â”‚   â€¢ 09:45:00 - 09:47:00 (3 bars)           â”‚
â”‚   â€¢ 10:15:00 - 10:17:00 (3 bars)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ (derived from 1m)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5m Bars (Derived Interval)                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Expected: 78 bars (09:30 - 16:00)           â”‚
â”‚ Actual: 77 bars                             â”‚
â”‚ Missing: 1 bar (1 gap)                      â”‚
â”‚ Quality: 98.7%                              â”‚
â”‚                                             â”‚
â”‚ Gaps:                                       â”‚
â”‚   â€¢ 09:45:00 - 09:50:00 (1 bar)            â”‚
â”‚     (spans both 1m gaps)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“ (derived from 1m)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 15m Bars (Derived Interval)                 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Expected: 26 bars (09:30 - 16:00)           â”‚
â”‚ Actual: 26 bars                             â”‚
â”‚ Missing: 0 bars                             â”‚
â”‚ Quality: 100%                               â”‚
â”‚                                             â”‚
â”‚ Gaps: None                                  â”‚
â”‚   (15m bars can tolerate small 1m gaps)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INSIGHT: Each interval needs its own gap analysis!
         Same underlying data, different gap patterns.
```

---

## Implementation Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… Phase 1: COMPLETE (Quality Percentage)         â”‚
â”‚    âœ“ Store quality per interval                   â”‚
â”‚    âœ“ Nest quality under each interval in JSON     â”‚
â”‚                                                    â”‚
â”‚ âŒ Phase 2: PROPOSED (Gap Details)                â”‚
â”‚    â˜ Add bar_gaps field to SymbolSessionData      â”‚
â”‚    â˜ Add set_gaps() method to SessionData         â”‚
â”‚    â˜ Update DataQualityManager to store gaps      â”‚
â”‚    â˜ Export gaps nested under each interval       â”‚
â”‚    â˜ Update CSV export to include gap summary     â”‚
â”‚                                                    â”‚
â”‚ ğŸ“Š Benefits:                                       â”‚
â”‚    â€¢ Full audit trail of data quality             â”‚
â”‚    â€¢ Per-interval gap visibility                  â”‚
â”‚    â€¢ Debug exactly when gaps occurred             â”‚
â”‚    â€¢ Track gap filling success (live mode)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
